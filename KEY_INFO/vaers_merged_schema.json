{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "VAERS Merged Data Schema",
  "description": "Schema for merged VAERS data combining DATA, VAX, and SYMPTOMS files into single rows per report",
  "type": "object",
  "properties": {
    "VAERS_ID": {
      "type": ["string", "integer"],
      "description": "Unique VAERS case identifier"
    },
    "RECVDATE": {
      "type": ["string", "null"],
      "description": "Date VAERS report was received (MM/DD/YYYY format)"
    },
    "STATE": {
      "type": ["string", "null"],
      "description": "State where vaccination occurred (2-letter abbreviation)"
    },
    "AGE_YRS": {
      "type": ["number", "null"],
      "description": "Age in years at time of vaccination (can be decimal for infants)"
    },
    "SEX": {
      "type": ["string", "null"],
      "description": "Sex of patient",
      "enum": ["F", "M", "U", null]
    },
    "SYMPTOM_TEXT": {
      "type": ["string", "null"],
      "description": "Free text narrative description of symptoms and events"
    },
    "DIED": {
      "type": ["string", "null"],
      "description": "Indicates if patient died",
      "enum": ["Y", "N", null]
    },
    "L_THREAT": {
      "type": ["string", "null"],
      "description": "Life-threatening illness",
      "enum": ["Y", "N", null]
    },
    "ER_VISIT": {
      "type": ["string", "null"],
      "description": "Emergency room or office visit",
      "enum": ["Y", "N", null]
    },
    "HOSPITAL": {
      "type": ["string", "null"],
      "description": "Hospitalization",
      "enum": ["Y", "N", null]
    },
    "DISABLE": {
      "type": ["string", "null"],
      "description": "Disability",
      "enum": ["Y", "N", null]
    },
    "RECOVD": {
      "type": ["string", "null"],
      "description": "Patient recovered",
      "enum": ["Y", "N", "U", null]
    },
    "VAX_DATE": {
      "type": ["string", "null"],
      "description": "Date of vaccination (MM/DD/YYYY format)"
    },
    "ONSET_DATE": {
      "type": ["string", "null"],
      "description": "Date of symptom onset (MM/DD/YYYY format)"
    },
    "NUMDAYS": {
      "type": ["integer", "null"],
      "description": "Number of days from vaccination to symptom onset"
    },
    "VAX_TYPE_list": {
      "type": ["array", "null"],
      "description": "List of vaccine type codes for all vaccines given",
      "items": {
        "type": "string",
        "description": "CDC vaccine type abbreviation (e.g., COVID19, FLU3, MMR, ZOSTER)"
      }
    },
    "VAX_MANU_list": {
      "type": ["array", "null"],
      "description": "List of vaccine manufacturers for all vaccines given",
      "items": {
        "type": "string",
        "description": "Manufacturer name (e.g., PFIZER\\BIONTECH, MODERNA, GLAXOSMITHKLINE)"
      }
    },
    "VAX_NAME_list": {
      "type": ["array", "null"],
      "description": "List of commercial vaccine names for all vaccines given",
      "items": {
        "type": "string",
        "description": "Commercial vaccine name (e.g., COVID19 (COVID19 (PFIZER-BIONTECH)), ZOSTER (SHINGRIX))"
      }
    },
    "VAX_DOSE_SERIES_list": {
      "type": ["array", "null"],
      "description": "List of dose numbers in vaccination series",
      "items": {
        "type": ["string", "null"],
        "description": "Dose number (1, 2, 3, 4, UNK, etc.)"
      }
    },
    "VAX_ROUTE_list": {
      "type": ["array", "null"],
      "description": "List of routes of administration",
      "items": {
        "type": ["string", "null"],
        "description": "Route (IM=intramuscular, SC=subcutaneous, IN=intranasal, PO=oral, etc.)"
      }
    },
    "VAX_SITE_list": {
      "type": ["array", "null"],
      "description": "List of vaccination sites on body",
      "items": {
        "type": ["string", "null"],
        "description": "Body site (LA=left arm, RA=right arm, LL=left leg, etc.)"
      }
    },
    "symptom_list": {
      "type": "array",
      "description": "List of structured symptoms/adverse events (from SYMPTOM1, SYMPTOM2, etc. columns)",
      "items": {
        "type": "string",
        "description": "MedDRA preferred term for symptom (e.g., 'Pain in extremity', 'Injection site erythema')"
      }
    }
  },
  "required": ["VAERS_ID"],
  "additionalProperties": false,
  "examples": [
    {
      "VAERS_ID": "2729674",
      "RECVDATE": "01/08/2024",
      "STATE": "CA",
      "AGE_YRS": 1.17,
      "SEX": "F",
      "SYMPTOM_TEXT": "Patient received incorrect dose of COVID-19 vaccine",
      "DIED": null,
      "L_THREAT": null,
      "ER_VISIT": null,
      "HOSPITAL": null,
      "DISABLE": null,
      "RECOVD": null,
      "VAX_DATE": "01/05/2024",
      "ONSET_DATE": "01/05/2024",
      "NUMDAYS": 0,
      "VAX_TYPE_list": ["COVID19"],
      "VAX_MANU_list": ["MODERNA"],
      "VAX_NAME_list": ["COVID19 (COVID19 (MODERNA))"],
      "VAX_DOSE_SERIES_list": ["1"],
      "VAX_ROUTE_list": ["IM"],
      "VAX_SITE_list": ["LA"],
      "symptom_list": ["Incorrect dose administered"]
    },
    {
      "VAERS_ID": "2730320",
      "RECVDATE": "01/09/2024",
      "STATE": "TX",
      "AGE_YRS": 24.0,
      "SEX": "F",
      "SYMPTOM_TEXT": "Patient experienced dizziness and injection site reactions after HPV vaccination",
      "DIED": "N",
      "L_THREAT": "N",
      "ER_VISIT": "N",
      "HOSPITAL": "N",
      "DISABLE": "N",
      "RECOVD": "Y",
      "VAX_DATE": "01/08/2024",
      "ONSET_DATE": "01/08/2024",
      "NUMDAYS": 0,
      "VAX_TYPE_list": ["HPV9"],
      "VAX_MANU_list": ["MERCK & CO. INC."],
      "VAX_NAME_list": ["HPV (GARDASIL 9)"],
      "VAX_DOSE_SERIES_list": ["2"],
      "VAX_ROUTE_list": ["IM"],
      "VAX_SITE_list": ["RA"],
      "symptom_list": ["Dizziness", "Feeling hot", "Hyperhidrosis", "Immediate post-injection reaction", "Injection site pain"]
    }
  ],
  "notes": {
    "data_source": "Merged from three VAERS CSV files: VAERSDATA, VAERSVAX, VAERSSYMPTOMS",
    "processing": "Random sample of VAERS_IDs selected, then all related records merged into single rows",
    "vaccine_handling": "Multiple vaccines per report aggregated into lists",
    "symptom_handling": "Only SYMPTOM1-SYMPTOM5 text fields included, version codes excluded",
    "duplicate_handling": "Some VAERS_IDs may appear multiple times due to different symptom record structures",
    "null_values": "Empty or missing values represented as null"
  }
}